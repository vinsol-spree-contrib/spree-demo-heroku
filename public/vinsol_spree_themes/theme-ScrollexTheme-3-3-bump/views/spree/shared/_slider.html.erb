<article class="home-page-parallax" >
  <% taxonomy = Spree::Taxonomy.first %>
  <div class="parallax-wrap">
    <% taxonomy.root.children.limit(9).each_with_index do |taxon, i| %>
      <div class="parallax-item <%= 'active' if i == 0 %>" style="background-image: url(<%= asset_path("home-slider/slide#{ i }.jpg") %>)">
        <div class="parallax-caption">
          <h3 ><%= taxon.name %></h3>
          <% if taxon.description %>
            <p class="taxon-info-text"><%= taxon.description %></p>
          <% end %>
          <div class="hover-effect-1">
            <%= link_to  't/' + taxon.permalink do %>
              <span data-hover="Explore">Explore</span>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</article>
<script type="text/javascript">
  $(function(){
    $(window).scroll( function(){
      var bottom_of_window = $(window).scrollTop() + $(window).height();
      //fade-in
      $('.parallax-item').each(function(){
        var bottom_of_object = $(this).position().top + $(this).outerHeight();
         if( bottom_of_window > bottom_of_object ){
          $(this).addClass('showing');
        }
        else{
          $(this).removeClass('showing');
        }
      });
    });
  });
</script>
